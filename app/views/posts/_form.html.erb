<%= form_with(model: post, html: { class: "post-form" }) do |form| %>
  <% if post.errors.any? %>
    <div class="post-form__errors">
      <h2 class="post-form__errors-title"><%= pluralize(post.errors.count, "error") %> prohibited this post from being saved:</h2>
      <ul class="post-form__errors-list">
        <% post.errors.full_messages.each do |message| %>
          <li class="post-form__errors-item"><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="post-form__field">
    <%= form.label :title, class: "post-form__label" %>
    <%= form.text_field :title, class: "post-form__input" %>
  </div>

  <div class="post-form__field">
    <%= form.label :text, class: "post-form__label" %>
    <%= form.text_area :text, rows: 4, class: "post-form__textarea" %>
  </div>

  <div class="post-form__field">
    <%= form.label :content, class: "post-form__label" %>
    <div class="post-form__richtext">
      <%= form.rich_text_area :content, class: "post-form__richtext-editor" %>
    </div>
  </div>

  <div class="post-form__field">
    <%= form.label :image, class: "post-form__label" %>
    <%= form.file_field :image, accept: "image/*", class: "post-form__file" %>

    <% if post.image.attached? %>
      <div class="post-form__preview">
        <%= image_tag post.image, alt: post.title, class: "post-form__preview-image" %>
      </div>
    <% end %>
  </div>

  <div class="post-form__actions">
    <%= form.submit class: "button button--primary post-form__submit" %>
    <%= link_to "Cancel", (post.persisted? ? post_path(post) : posts_path), class: "button button--secondary post-form__cancel" %>
  </div>
<% end %>
